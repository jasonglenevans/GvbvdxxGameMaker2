eval(atob("d2luZG93LnZtID0gewoJZGF5c1NpbmNlMjAwMDpmdW5jdGlvbiAoKSB7CgkJY29uc3QgbXNQZXJEYXkgPSAyNCAqIDYwICogNjAgKiAxMDAwOwoJCWNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoMjAwMCwgMCwgMSk7IC8vIE1vbnRocyBhcmUgMC1pbmRleGVkLgoJCWNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsKCQljb25zdCBkc3RBZGp1c3QgPSB0b2RheS5nZXRUaW1lem9uZU9mZnNldCgpIC0gc3RhcnQuZ2V0VGltZXpvbmVPZmZzZXQoKTsKCQlsZXQgbVNlY3NTaW5jZVN0YXJ0ID0gdG9kYXkudmFsdWVPZigpIC0gc3RhcnQudmFsdWVPZigpOwoJCW1TZWNzU2luY2VTdGFydCArPSAoKHRvZGF5LmdldFRpbWV6b25lT2Zmc2V0KCkgLSBkc3RBZGp1c3QpICogNjAgKiAxMDAwKTsKCQlyZXR1cm4gbVNlY3NTaW5jZVN0YXJ0IC8gbXNQZXJEYXk7Cgl9LAoJaWRjb3VudGVyOjAsCglzdGFydFRpbWU6MCwKCXJlc2V0VGltZXI6KCkgPT4gewoJCXZtLnN0YXJ0VGltZSA9IHZtLmRheXNTaW5jZTIwMDAoKSo4NjQwMDsKCQl2bS5wcm9qZWN0LnRpbWVyID0gMDsKCX0sCgljb250cm9sOiB7CgkJc3RhcnQ6YXN5bmMgZnVuY3Rpb24gKGEpIHsKCQkJaWYgKHZtLmF1ZGlvRW5naW5lKSB7CgkJCQlpZiAodm0ucmVuZGVyZXIpIHsKCQkJCQlmb3IgKHZhciBuYW1lIG9mIHZtLnByb2plY3QucmVzb3VyY2VzKSB7CgkJCQkJCWlmICh2bS5wcm9qZWN0LnJlc291cmNlc1tuYW1lXS50eXBlID09ICJhdWRpbyIpIHsKCQkJCQkJCWF3YWl0IHZtLmF1ZGlvRW5naW5lLmFkZFRvUHJlbG9hZCh2bS5wcm9qZWN0LnJlc291cmNlc1tuYW1lXS5kYXRhKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQl2bS5jb250cm9sLnN0b3AoKTsKCQkJCQl2bS5yZXNldFRpbWVyKCk7CgkJCQkJdm0uY29udHJvbC5ydW5uaW5nID0gdHJ1ZTsKCQkJCQl2bS5pZGNvdW50ZXIgPSAwOwoJCQkJCXZtLnByb2plY3QubW9uaXRvcnMgPSBbXTsKCQkJCQl3aW5kb3cudm0ucmVuZGVyZXIuY2FtZ2hvc3QgPSAwOwoJCQkJCXdpbmRvdy52bS5yZW5kZXJlci5iZy5zcmMgPSAiIjsKCQkJCQl0cnl7CgkJCQkJCS8qKgoJCQkJCQkgZnV0dXJlIHVwZGF0ZTogaSBtYXkgYWRkIGZldGNoIGJsb2NrcywKCQkJCQkJIHNvIGkgd2lsbCBuZWVkIGFzeW5jIGZ1bmN0aW9ucy4KCQkJCQkJKi8KCQkJCQkJZXZhbCh2bS5jb2RlKTsKCQkJCQl9Y2F0Y2goZSl7CgkJCQkJCXZtLmNvbnNvbGUuZXJyb3IoIkVycm9yIGluIHNjcmlwdDoiK2UpOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJdGhyb3cgRXJyb3IoIlJlbmRlcmVyIE11c3QgQmUgQXR0YWNoZWQiKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXRocm93IEVycm9yKCJBdWRpb0VuZ2luZSBNdXN0IEJlIEF0dGFjaGVkIik7CgkJCX0KCQl9LAoJCXN0b3A6IGZ1bmN0aW9uICgpIHsKIAkJCWZvciAodmFyIGkgaW4gdm0ucHJvamVjdC50aW1lb3V0cykgewoJCQkJY2xlYXJUaW1lb3V0KHZtLnByb2plY3QudGltZW91dHNbaV0pOwoJCQl9CgkJCXZtLnByb2plY3QudGltZW91dHMgPSBbXTsKCQkJdm0uaWRjb3VudGVyID0gMDsKCQkJdm0uY29udHJvbC5ydW5uaW5nID0gZmFsc2U7CgkJCXZtLnByb2plY3Quc3ByaXRlcyA9IFtdOwoJCQl2bS5wcm9qZWN0LmV2ZW50cy50aWNrID0gW107CgkJCXZtLnByb2plY3Quc3ByaXRlcyA9IFtdOwoJCQl2bS5wcm9qZWN0LmtleXNQcmVzc2VkID0gW107CgkJCXZtLmF1ZGlvRW5naW5lLnN0b3AoKTsKCQkJdHJ5ewoJCQkJd2luZG93LnZtLm9uc3RvcCgpOwoJCQl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKTt9CgkJfSwKCQlydW5uaW5nOmZhbHNlCgl9LAoJY29kZTogIiIsCglyZW5kZXJlcjpudWxsLAoJYXR0YWNoUmVuZGVyZXI6ZnVuY3Rpb24gKGEpIHsKCQl2bS5yZW5kZXJlciA9IGE7CgkJdm0ucmVuZGVyZXIuc3RhcnQoKTsKCQlyZXR1cm4gYTsKCX0sCglhdHRhY2hBdWRpb0VuZ2luZTpmdW5jdGlvbiAoYSkgewoJCXZtLmF1ZGlvRW5naW5lID0gYTsKCQlyZXR1cm4gYTsKCX0sCglzZXRDb21waWFkaWJsaXR5TW9kZTpmdW5jdGlvbiAoYSkgewoJCXRoaXMuY29tcGlhZGlibGl0eU1vZGUgPSBhOwoJfSwKCWNvbXBpYWRpYmxpdHlNb2RlOiBmYWxzZSwKCXByb2plY3Q6IHsKCQltb3VzZURvd246IGZhbHNlLAoJCW1vdXNlWDowLAoJCW1vdXNlWTowLAoJCWtleXNQcmVzc2VkOltdLAoJCXNwcml0ZXM6W10sCgkJZXZlbnRzOiB7CgkJCXRpY2s6IFtdCgkJfSwKCQltb25pdG9yczpbXSwKCQlyZXNvdXJjZXM6W10sCgkJdGltZXI6MCwKCQl0aW1lb3V0czpbXSwKCQlibG9jazp7CgkJCXRpY2tBc3luYzpmdW5jdGlvbiAoKSB7CgkJCQlyZXR1cm4gbmV3IFByb21pc2UoKGEpID0+IHsKCQkJCQlzZXRUaW1lb3V0KGEsMSk7CgkJCQl9KQoJCQl9LAoJCQl3YWl0QXN5bmM6ZnVuY3Rpb24gKHMpIHsKCQkJCXJldHVybiBuZXcgUHJvbWlzZSgoYSkgPT4gewoJCQkJCXZtLnByb2plY3QudGltZW91dHMucHVzaChzZXRUaW1lb3V0KGEscyoxMDAwKSk7CgkJCQl9KQoJCQl9LAoJCQltb3ZlU3RlcHM6ZnVuY3Rpb24gKHNwcml0ZSxzdGVwcykgewoJCQkJdHJ5ewoJCQkJdmFyIHJlYWxzdGVwcyA9IHN0ZXBzOwoJCQkJdmFyIHJlYWxkaXIgPSA5MC1zcHJpdGUuZGlyZWN0aW9uOwoJCQkJdmFyIHhCeSA9IE1hdGguY29zKHJlYWxkaXIgKiAoTWF0aC5QSS8xODApKSpyZWFsc3RlcHM7CgkJCQl2YXIgeUJ5ID0gTWF0aC5zaW4ocmVhbGRpciAqIChNYXRoLlBJLzE4MCkpKnJlYWxzdGVwczsKCQkJCXZhciByZWFseGJ5ID0geEJ5ICsgeEJ5OwoJCQkJc3ByaXRlLnggPSBzcHJpdGUueCArIHJlYWx4Ynk7CgkJCQlzcHJpdGUueSA9IHNwcml0ZS55ICsgKHlCeSt5QnkpOwoJCQkJfWNhdGNoKGUpe3ZtLmNvbnNvbGUuZXJyb3IoIkVycm9yIGluIHNjcmlwdDoiK2UpO30KCQkJfSwKCQkJZGVsZXRlTGlzdDpmdW5jdGlvbiAoYXJyYXksbnVtYmVyKSB7CgkJCQl0cnl7CgkJCQlkZWxldGUgYXJyYXlbbnVtYmVyXTsKCQkJCXZhciBpbmRleCA9IDA7CgkJCQl2YXIgZ2VuYXJhdGVkQXJyYXkgPSBbXTsKCQkJCXdoaWxlIChhcnJheS5sZW5ndGggPiBpbmRleCkgewoJCQkJCWlmICghKGFycmF5W2luZGV4XSA9PSB1bmRlZmluZWQpKSB7CgkJCQkJCWdlbmFyYXRlZEFycmF5LnB1c2goYXJyYXlbaW5kZXhdKTsKCQkJCQl9CgkJCQkJaW5kZXggKz0gMTsKCQkJCX0KCQkJCXJldHVybiBnZW5hcmF0ZWRBcnJheTsKCQkJCX1jYXRjaChlKXt2bS5jb25zb2xlLmVycm9yKCJFcnJvciBpbiBzY3JpcHQ6IitlKTt9CgkJCX0sCgkJCW1ha2VTcHJpdGU6ZnVuY3Rpb24gKCkgewoJCQkJdHJ5ewoJCQkJdm0uaWRjb3VudGVyICs9IDE7CgkJCQl2YXIgc3ByID0gewoJCQkJCWRpcmVjdGlvbjo5MCwKCQkJCQl4OjAsCgkJCQkJeTowLAoJCQkJCXdpZHRoOjMyLAoJCQkJCWhlaWdodDozMiwKCQkJCQlpbWFnZTpudWxsLAoJCQkJCWZsaXA6Im5vbmUiLAoJCQkJCWlkOnZtLmlkY291bnRlciwKCQkJCQlnaG9zdDowLAoJCQkJCWNsaWNrZWQ6IFtdCgkJCQl9OwoJCQkJdGhpcy5zaG93U3ByaXRlKHNwcik7CgkJCQlyZXR1cm4gc3ByOwoJCQkJdHJ5ewoJCQkJCXdpbmRvdy52bS5vbnNwcml0ZWNyZWF0ZShzcHIpOwoJCQkJfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSk7fQoJCQkJfWNhdGNoKGUpe30KCgkJCX0sCgkJCW1ha2VNb25pdG9yOiBmdW5jdGlvbiAoKSB7CgkJCQl0cnl7CgkJCQl2YXIgbW9uaXRvciA9IHsKCQkJCQl4OjAsCgkJCQkJeTowLAoJCQkJCXZhbHVlOjAsCgkJCQkJbmFtZToibW9uaXRvciIsCgkJCQkJdmlzaWJsZTp0cnVlLAoJCQkJCWNsaWNrZWQ6IFtdCgkJCQl9OwoJCQkJd2luZG93LnZtLnByb2plY3QubW9uaXRvcnMucHVzaChtb25pdG9yKTsKCQkJCXJldHVybiBtb25pdG9yOwoJCQkJfWNhdGNoKGUpe3ZtLmNvbnNvbGUuZXJyb3IoIkVycm9yIGluIHNjcmlwdDoiK2UpO30KCQkJfSwKCQkJc2hvd1Nwcml0ZTpmdW5jdGlvbiAoc3ByKSB7CgkJCQl0cnl7CgkJCQkJdGhpcy5oaWRlU3ByaXRlKHNwcik7IC8vZW5zdXJlIHRoZXJlIGlzIG9ubHkgb25lIHNwcml0ZSB3aGVuIHNob3dpbmcgYWdhaW4uCgkJCQkJdm0ucHJvamVjdC5zcHJpdGVzLnB1c2goc3ByKTsKCQkJCX1jYXRjaChlKXt2bS5jb25zb2xlLmVycm9yKCJFcnJvciBpbiBzY3JpcHQ6IitlKTt9CgkJCX0sCgkJCWhpZGVTcHJpdGU6ZnVuY3Rpb24gKHNwcikgewoJCQkJdHJ5ewoJCQkJdmFyIGkgPSB2bS5wcm9qZWN0LnNwcml0ZXMuaW5kZXhPZihzcHIpOwoJCQkJaWYgKGkgPiAtMSkgewoJCQkJCXZtLnByb2plY3Quc3ByaXRlcy5zcGxpY2UoaSwgMSk7IC8vIDJuZCBwYXJhbWV0ZXIgbWVhbnMgcmVtb3ZlIG9uZSBpdGVtIG9ubHkKCQkJCX0KCQkJCX1jYXRjaChlKXt9CgkJCX0sCgkJCWNvczpmdW5jdGlvbiAobnVtYmVyKSB7CgkJCQl0cnl7CgkJCQlyZXR1cm4gTWF0aC5jb3MoKG51bWJlcikqIChNYXRoLlBJLzE4MCkpOwoJCQkJfWNhdGNoKGUpe3ZtLmNvbnNvbGUuZXJyb3IoZSk7fQoJCQl9LAoJCQlzaW46ZnVuY3Rpb24gKG51bWJlcikgewoJCQkJdHJ5ewoJCQkJcmV0dXJuIE1hdGguc2luKChudW1iZXIpKiAoTWF0aC5QSS8xODApKTsKCQkJCX1jYXRjaChlKXt2bS5jb25zb2xlLmVycm9yKGUpO30KCQkJfSwKCQkJZ2V0TW9zZURhdGE6ZnVuY3Rpb24gKCkgewoJCQkJdHJ5ewoJCQkJcmV0dXJuIHsKCQkJCQl4OnZtLnByb2plY3QubW91c2VYLAoJCQkJCXk6dm0ucHJvamVjdC5tb3VzZVksCgkJCQkJZG93bjp2bS5wcm9qZWN0Lm1vdXNlRG93bgoJCQkJfTsKCQkJCX1jYXRjaChlKXt9CgkJCX0sCgkJCWRhdGFUb0ltZzpmdW5jdGlvbiAoZGF0YVVSSSkgewoJCQkJdHJ5ewoJCQkJdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwoJCQkJaW1nLnNyYyA9IGRhdGFVUkk7CgkJCQlpbWcuc2V0QXR0cmlidXRlKCJzdHlsZSIsImltYWdlLXJlbmRlcmluZzogcGl4ZWxhdGVkOyIpOwoJCQkJcmV0dXJuIGltZzsKCQl9Y2F0Y2goZSl7fQoJCQl9LAoJCQlyYW5kb206IGZ1bmN0aW9uIChhLCBiKSB7CgkJCSAgaWYgKGEgPiBiKSB7CgkJCQkvLyBTd2FwIGEgYW5kIGIgdG8gZW5zdXJlIGEgaXMgc21hbGxlci4KCQkJCXZhciBjID0gYTsKCQkJCWEgPSBiOwoJCQkJYiA9IGM7CgkJCSAgfQoJCQkgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoYiAtIGEgKyAxKSArIGEpOwoJCQl9LAoJCQlpc1RvdWNoaW5nOiBmdW5jdGlvbiAoc3ByaXRlMSxzcHJpdGUyLCBtb2RlKSB7CgkJCQkvKmlmIChzcDEueCA+IHNwMi54KSB7CgkJCQkJdmFyIGRldmlkZU51bVggPSAtMjsKCQkJCX0gZWxzZSB7CgkJCQkJdmFyIGRldmlkZU51bVggPSAyOwoJCQkJfQoJCQkJc3AxLnggLT0gc3AxLndpZHRoL2RldmlkZU51bVg7CgkJCQl2YXIgcmVzID0gKAoJCQkJc3AxLnggPCBzcDIueCArIChzcDIud2lkdGgvMSkgJiYKCQkJCXNwMS54ICsgKHNwMS53aWR0aC8xKSA+IHNwMi54ICYmCgkJCQlzcDEueSA8IHNwMi55ICsgc3AyLmhlaWdodCAmJgoJCQkJc3AxLmhlaWdodCArIHNwMS55ID4gc3AyLnkKCQkJCSk7CgkJCQlzcDEueCArPSBzcDEud2lkdGgvZGV2aWRlTnVtWDsKCQkJCXJldHVybiByZXM7Ki8KCQkJCXRyeXsKCQkJCXJldHVybiB2bS5fX19DSEVDS0NPTExJREUoc3ByaXRlMSxzcHJpdGUyKTsKCQkJCX1jYXRjaChlKXt2bS5jb25zb2xlLmVycm9yKCJFcnJvciBpbiBzY3JpcHQ6IitlKTt9CgkJCX0sCgkJCWdldEtleVByZXNzZWQ6IGZ1bmN0aW9uIChrZXluYW1lKSB7CgkJCQl0cnl7CgkJCQlpZiAodm0ucHJvamVjdC5rZXlzUHJlc3NlZFtrZXluYW1lXSkgewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQl9Y2F0Y2goZSl7fQoJCQl9LAoJCQl3YWl0OmZ1bmN0aW9uIChzZWNzLGNhbGxiYWNrKSB7CgkJCQl0cnl7CgkJCQkJLyoqVXBkYXRlIEZvciBWMS41LjAhCgkJCQkJRml4ZWQgQSBCdWcgV2hlcmUgSWYgWW91IFN0b3AgVGhlIFByb2plY3QgQW5kIFJ1biBJdCwKCQkJCQlBbGwgVGhlIFdhaXRzIFdpbGwgUnVuIElmIFRoZXkgQXJlIE5vdCBPdmVyIFlldC4KCQkJCQlUbyBGaXggVGhpcywgSSBVc2VkIEFuIGNsZWFyVGltZW91dCgpIEZ1bmN0aW9uIEZvciBFYWNoIE9uZS4KCQkJCQkqLwoJCQkJCXZtLnByb2plY3QudGltZW91dHMucHVzaChzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQkJaWYgKHdpbmRvdy52bS5jb250cm9sLnJ1bm5pbmcpIHsKCQkJCQkJCWNhbGxiYWNrKCk7CgkJCQkJCX0KCQkJCQl9LHNlY3MqMTAwMCkpOyAvKjEwMDBtcyA9IDEgc2Vjb25kKi8KCQkJCX1jYXRjaChlKXt9CgkJCX0sCgkJCWdldFRvdWNoTW91c2U6IGZ1bmN0aW9uIChzcHIpIHsKCQkJCXJldHVybiB3aW5kb3cudm0uX19fQ0hFQ0tDT0xMSURFKHt4OndpbmRvdy52bS5wcm9qZWN0Lm1vdXNlWCx5OndpbmRvdy52bS5wcm9qZWN0Lm1vdXNlWSx3aWR0aDoxLGhlaWdodDoxfSxzcHIpOwoJCQl9LAoJCQljaGFuZ2VDb2xvckVmZmVjdDpmdW5jdGlvbiAoaW1nLHIsZyxiKSB7CgkJCQlpbWcuc3JjID0gd2luZG93LnZtLnJlbmRlcmVyLmdldENvbG9yRWZmZWN0KGltZyxyLGcsYik7CgkJCX0sCgkJCW1pY1ZvbHVtZTpmdW5jdGlvbiAoKSB7CgkJCQlpZiAod2luZG93LnZtLnJlbmRlcmVyLmNhbXJ1bikgewoJCQkJCXJldHVybiB3aW5kb3cudm0ucmVuZGVyZXIubWljdm9sOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gMDsKCQkJCX0KCQkJfSwKCQkJb3BlbkNhbWVyYTpmdW5jdGlvbiAoKSB7CgkJCQl3aW5kb3cudm0ucmVuZGVyZXIuc3RhcnRDYW1lcmFTdHJlYW0oKTsKCQkJfSwKCQkJc3RvcENhbWVyYTpmdW5jdGlvbiAoKSB7CgkJCQl3aW5kb3cudm0ucmVuZGVyZXIuc3RvcENhbWVyYVN0cmVhbSgpOwoJCQl9CgkJfQoJfSwKCXZhcmlhYmxlczp7CgkJY2FuRHJhZzpmYWxzZQoJfSwKCXZtVGljazogZnVuY3Rpb24gKCkgewoJCWlmICh2bS5jb250cm9sLnJ1bm5pbmcpIHsKCQkJdm0ucHJvamVjdC50aW1lciA9ICh2bS5kYXlzU2luY2UyMDAwKCkqODY0MDApLXZtLnN0YXJ0VGltZTsKCQkJZm9yICh2YXIgaSBpbiB2bS5wcm9qZWN0LmV2ZW50cy50aWNrKSB7CgkJCQl0cnl7CgkJCQkJdm0ucHJvamVjdC5ldmVudHMudGlja1tpXSgpCgkJCQl9Y2F0Y2goZSl7dm0uY29uc29sZS5lcnJvcihlKTt9CgkJCX0KCQkJdHJ5ewoJCQkJdm0ucmVuZGVyZXIudGljayh2bS5wcm9qZWN0LnNwcml0ZXMsdm0ucHJvamVjdC5tb25pdG9ycyk7CgkJCX1jYXRjaChlKXt9CgkJCXRoaXMudGlja3MgKz0gMDsKCQkJdHJ5ewoJCQkJd2luZG93LnZtLm9udGljaygpOwoJCQl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKTt9CgkJfSBlbHNlIHsKCQkJdGhpcy50aWNrcyA9IDA7CgkJfQoJCXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodm0udm1UaWNrKTsKCX0sCglzdGFydDpmdW5jdGlvbiAoKSB7CgkJdm0uY29udHJvbC5zdGFydCgpOwoJfSwKCXN0b3A6ZnVuY3Rpb24gKCkgewoJCXZtLmNvbnRyb2wuc3RvcCgpOwoJfSwKCXNldE1vdXNlUG9zOiBmdW5jdGlvbiAoZGF0YSkgewoJCXRoaXMucHJvamVjdC5tb3VzZVggPSBkYXRhLng7CgkJdGhpcy5wcm9qZWN0Lm1vdXNlWSA9IGRhdGEueTsKCX0sCglzZXRNb3VzZURvd246IGZ1bmN0aW9uIChkYXRhKSB7CgkJaWYgKGRhdGEgPT0gdHJ1ZSkgewoJCQlmb3IgKHZhciBpIGluIHZtLnByb2plY3Quc3ByaXRlcykgewoJCQkJdHJ5ewoJCQkJCWlmICh0aGlzLl9fX0NIRUNLQ09MTElERSh7eDp0aGlzLnByb2plY3QubW91c2VYLHk6dGhpcy5wcm9qZWN0Lm1vdXNlWSx3aWR0aDoxLGhlaWdodDoxfSx2bS5wcm9qZWN0LnNwcml0ZXNbaV0pKSB7CgkJCQkJCXZhciBjdXJyZW50U3ByaXRlID0gdm0ucHJvamVjdC5zcHJpdGVzW2ldOwoJCQkJCQlmb3IgKHZhciBpMiBpbiBjdXJyZW50U3ByaXRlLmNsaWNrZWQpIHsKCQkJCQkJCXRyeXsKCQkJCQkJCQljdXJyZW50U3ByaXRlLmNsaWNrZWRbaTJdKCkKCQkJCQkJCX1jYXRjaChlKXt2bS5jb25zb2xlLmVycm9yKGUpO30KCQkJCQkJfQoJCQkJCQkvL2NvbnNvbGUubG9nKCJjbGlja2VkIHNwcml0ZS4iKTsKCQkJCQl9CgkJCQl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKTt9CgkJCX0KCQl9CgkJdGhpcy5wcm9qZWN0Lm1vdXNlRG93biA9IGRhdGE7Cgl9LAoJY29uc29sZTogewoJCWxvZzogZnVuY3Rpb24gKHRleHQpIHsKCQkJY29uc29sZS5sb2coIlt2bSAtIHByb2dyYW1dOiAiICsgdGV4dCk7CgkJfSwKCQllcnJvcjogZnVuY3Rpb24gKHRleHQpIHsKCQkJY29uc29sZS5lcnJvcigiW3ZtIC0gcHJvZ3JhbV06ICIgKyB0ZXh0KTsKCQkJdm0uc3RvcCgpOwoJCX0sCgkJY2xlYXI6IGZ1bmN0aW9uICh0ZXh0KSB7CgkJCWNvbnNvbGUuY2xlYXIoKTsKCQl9Cgl9LAoJc2ltdWxhdGVLZXk6IGZ1bmN0aW9uIChkYXRhKSB7CgkJaWYgKGRhdGEuZG93bikgewoJCQl0aGlzLnByb2plY3Qua2V5c1ByZXNzZWRbZGF0YS5rZXldID0gdHJ1ZTsKCQl9IGVsc2UgewoJCQl0aGlzLnByb2plY3Qua2V5c1ByZXNzZWRbZGF0YS5rZXldID0gZmFsc2U7CgkJfQoJfSwKCWNvbGxpZGVXaWR0aDowLAoJY29sbGlkZUhlaWdodDowLAoJX19fQ0hFQ0tDT0xMSURFOmZ1bmN0aW9uIChzcHIxLHNwcjIpewoJCXJldHVybiBmYWxzZTsKCX0sCgljb2xsaWRlRGl2OmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLAoJYWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbiAobmFtZSxldmVudE5hbWUpIHsKCQl0aGlzWyJvbiIrbmFtZV0gPSBldmVudE5hbWU7Cgl9LAoJb250aWNrOiBmdW5jdGlvbigpe30sCglvbnNwcml0ZWNyZWF0ZTogZnVuY3Rpb24oc3ByaXRlKXt9LAoJb25zdG9wOiBmdW5jdGlvbigpe30sCglfX2RlY29kZURhdGFCYXNlNjRVUkk6IGZ1bmN0aW9uIChkYXRhVVJJKSB7CgkJcmV0dXJuIGF0b2IoZGF0YVVSSS5zcGxpdCgiOyIpLnBvcCgpLnNwbGl0KCIsIikucG9wKCkpOwoJfQp9CnZtLl9fX0NIRUNLQ09MTElERSA9IGZ1bmN0aW9uIGlzQ29sbGlkZShhMiwgYjIpIHsKCWZ1bmN0aW9uIGdldFJlYWxDYW52YXNQb3MoeCx5LHdpZHRoLGhlaWdodCxjYW52YXMpIHsKCQl2YXIgbWFpblggPSB4LSh3aWR0aC8yKTsKCQl2YXIgbWFpblkgPSB5LShoZWlnaHQvMik7CgkJcmV0dXJuIHsKCQkJeDptYWluWC0oY2FudmFzLndpZHRoLzIpLAoJCQl5Om1haW5ZLShjYW52YXMuaGVpZ2h0LzIpCgkJfTsKCX0KCXZhciBhID0gewoJCXdpZHRoOmEyLndpZHRoLzIsCgkJaGVpZ2h0OmEyLmhlaWdodCwKCQl4OmdldFJlYWxDYW52YXNQb3MoYTIueCxhMi55LGEyLndpZHRoLzIsYTIuaGVpZ2h0LHZtLnJlbmRlcmVyLmNhbnZhcykueCwKCQl5OmdldFJlYWxDYW52YXNQb3MoYTIueCxhMi55LGEyLndpZHRoLzIsYTIuaGVpZ2h0LHZtLnJlbmRlcmVyLmNhbnZhcykueQoJfTsKCXZhciBiID0gewoJCXdpZHRoOmIyLndpZHRoLzIsCgkJaGVpZ2h0OmIyLmhlaWdodCwKCQl4OmdldFJlYWxDYW52YXNQb3MoYjIueCxiMi55LGIyLndpZHRoLzIsYjIuaGVpZ2h0LHZtLnJlbmRlcmVyLmNhbnZhcykueCwKCQl5OmdldFJlYWxDYW52YXNQb3MoYjIueCxiMi55LGIyLndpZHRoLzIsYjIuaGVpZ2h0LHZtLnJlbmRlcmVyLmNhbnZhcykueQoJfTsKCXZhciByZXN1bHQgPSAoCgkJYS54ICsgYS53aWR0aCA+PSBiLnggJiYKCQlhLnggPD0gYi54ICsgYi53aWR0aCAmJgoJCWEueSArIGEuaGVpZ2h0ID49IGIueSAmJgoJCWEueSA8PSBiLnkgKyBiLmhlaWdodAogICAgKTsKCS8qaWYgKGEyLmltYWdlKSB7CgkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhMi5pbWFnZSk7CgkJYTIuaW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwoJCWEyLmltYWdlLnN0eWxlLnRvcCA9IGEyLnkrKHZtLnJlbmRlcmVyLmNhbnZhcy5oZWlnaHQgLyAyKSsncHgnOwoJCWEyLmltYWdlLnN0eWxlLmxlZnQgPSBhMi54Kyh2bS5yZW5kZXJlci5jYW52YXMud2lkdGggLyAyKSsncHgnOwoJCWEyLmltYWdlLndpZHRoID0gYTIud2lkdGg7CgkJYTIuaW1hZ2UuaGVpZ2h0ID0gYTIuaGVpZ2h0OwoJfQoJaWYgKGIyLmltYWdlKSB7CgkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChiMi5pbWFnZSk7CgkJYjIuaW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwoJCWIyLmltYWdlLnN0eWxlLnRvcCA9IGIyLnkrKHZtLnJlbmRlcmVyLmNhbnZhcy5oZWlnaHQgLyAyKSsncHgnOwoJCWIyLmltYWdlLnN0eWxlLmxlZnQgPSBiMi54Kyh2bS5yZW5kZXJlci5jYW52YXMud2lkdGggLyAyKSsncHgnOwoJCWIyLmltYWdlLndpZHRoID0gYjIud2lkdGg7CgkJYjIuaW1hZ2UuaGVpZ2h0ID0gYjIuaGVpZ2h0OwoJfSovCiAgICByZXR1cm4gcmVzdWx0Owp9Owp3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHZtLnZtVGljayk7Ci8qClRFU1QgU0NSSVBUUzoKd2hpbGUgaW4gZGV2bG9wbWVudCBpIHJhbiBjb2RlIHRvIGNoZWNrIGlmIGV2ZXJ5dGhpbmcgaXMgd29ya2luZy4KYmFzaWMgdGVzdDoKdmFyIHNwcml0ZSA9IHZtLnByb2plY3QuYmxvY2subWFrZVNwcml0ZSgpOwpzcHJpdGUuaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGVzdEltYWdlIik7CgpoaWRlIHNwcml0ZSB0ZXN0OgoKdm0ucHJvamVjdC5ibG9jay5oaWRlU3ByaXRlKHNwcml0ZSk7CgpzZWNvbmQgc3ByaXRlIHRlc3Q6Cgp2YXIgc3ByaXRlMiA9IHZtLnByb2plY3QuYmxvY2subWFrZVNwcml0ZSgpOwpzcHJpdGUyLmltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRlc3RJbWFnZSIpOwoKcm90YXRpbmcgc3ByaXRlIHRlc3Q6CnZhciBzcHJpdGUzID0gdm0ucHJvamVjdC5ibG9jay5tYWtlU3ByaXRlKCk7CnNwcml0ZTMuaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGVzdEltYWdlIik7CnZtLnByb2plY3QuZXZlbnRzLnRpY2sucHVzaChmdW5jdGlvbiAoKSB7CglzcHJpdGUzLmRpcmVjdGlvbiArPSAxOwp9KTsKKi8="));eval(atob("d2luZG93LnJlbmRlcmVyID0gewoJY2FudmFzOiBudWxsLAoJYmc6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpLAoJYmFja2dyb3VuZEltZzpudWxsLAoJZ2V0VXNlck1lZGlhOiBmdW5jdGlvbiAoYSkgewoJICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkgICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoYSwgcmVzb2x2ZSwgKCk9PntyZXNvbHZlKCJDYW1EZW5pZWQiKTt9KTsKCSAgICB9KTsKCX0sCgljYW1jYW52YXM6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksCgljYW1jb250ZXh0Om51bGwsCgljYW12aWQ6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidmlkZW8iKSwKCWNhbXJ1bjpmYWxzZSwKCXN0YXJ0Q2FtZXJhU3RyZWFtOiBhc3luYyBmdW5jdGlvbiAoKSB7CgkJaWYgKCEodGhpcy5jYW1ydW4pKSB7CgkJCS8vbm90IHRvIGNyZWVwIG91dCB0aGUgdXNlciBmcm9tIHRoaW5raW5nIHRoYXQgdGhleSBhcmUgdHJ5aW5nIHRvIGdldCBzcHllZCBvbi4uLgoJCQl2YXIgc3RyZWFtID0gYXdhaXQgdGhpcy5nZXRVc2VyTWVkaWEoewoJCQkJdmlkZW86IHRydWUsCgkJCQlhdWRpbzogdHJ1ZQoJCQl9KTsKCQkJaWYgKHN0cmVhbSA9PSAiQ2FtRGVuaWVkIikgewoJCQkJcmV0dXJuOyAvL2RlbmllZCBhY2Nlc3MgKGRvIHRoZXkgdGhpbmsgdGhhdCB0aGV5IGFyZSB0cnlpbmcgdG8gZ2V0IHNweWVkIG9uPykKCQkJfQoJCQkvL29rISB3ZSBnb3QgYWNjZXNzLCBzbyBub3cgd2UgbmVlZCB0byB1c2UgaXQhCgkJCXRoaXMuY2Ftc3RyZWFtID0gc3RyZWFtOwoJCQl0aGlzLmNhbXZpZC5zcmNPYmplY3QgPSBzdHJlYW07CgkJCXRoaXMuY2FtY2FudmFzLndpZHRoID0gdGhpcy5jYW12aWQud2lkdGg7CgkJCXRoaXMuY2FtY2FudmFzLmhlaWdodCA9IHRoaXMuY2FtdmlkLndpZHRoOwoJCQl0aGlzLmNhbXJ1biA9IHRydWU7CgkJCXZhciBhdWRpb0NvbnRleHQgPSB3aW5kb3cudm0uYXVkaW9FbmdpbmUuY29udGV4dDsKCQkJdmFyIGFuYWx5c2VyID0gYXVkaW9Db250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7CgkJCXZhciBtaWNyb3Bob25lID0gYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHN0cmVhbSk7CgoJCQlhbmFseXNlci5zbW9vdGhpbmdUaW1lQ29uc3RhbnQgPSAwLjg7CgkJCWFuYWx5c2VyLmZmdFNpemUgPSAxMDI0OwoJCQl2YXIgcmVuZCA9IHRoaXM7CgkJCW1pY3JvcGhvbmUuY29ubmVjdChhbmFseXNlcik7CgkJCXRoaXMuY2FtaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CgkJCQl2YXIgYXJyYXkgPSBuZXcgVWludDhBcnJheShhbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCk7CgkJCQlhbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YShhcnJheSk7CgkJCQl2YXIgYXJyYXlTdW0gPSBhcnJheS5yZWR1Y2UoKGEsIHZhbHVlKSA9PiBhICsgdmFsdWUsIDApOwoJCQkJdmFyIGF2ZXJhZ2UgPSBhcnJheVN1bSAvIGFycmF5Lmxlbmd0aDsKCQkJCXJlbmQubWljdm9sID0gYXZlcmFnZS8yMDAqMTAwOwoJCQkJLy8gY29sb3JQaWRzKGF2ZXJhZ2UpOwoJCQl9LDEpOwoJCX0KCX0sCglzdG9wQ2FtZXJhU3RyZWFtOiBhc3luYyBmdW5jdGlvbiAoKSB7CgkJLy9xdWljayBjaGVjayB0byBzZWUgaWYgd2UgYXJlIHJ1bm5pbmcgdGhlIGNhbXJlYQoJCWlmICh0aGlzLmNhbXJ1bikgewoJCQl0aGlzLmNhbXJ1biA9IGZhbHNlOyAvL3N0b3AgcmVuZGVyaW5nIHRoZSBjYW1yZWEhCgkJCS8vc3RvcCByZWNvcmRpbmcgdmlkZW8hCgkJCXJlbmRlcmVyLmNhbXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goKHQpID0+IHsKCQkJCXQuc3RvcCgpOwoJCQl9KTsKCQkJLy9zdG9wIHJlY29yZGluZyBhdWRpbyEKCQkJcmVuZGVyZXIuY2Ftc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaCgodCkgPT4gewoJCQkJdC5zdG9wKCk7CgkJCX0pOwoJCQkvL2VuZCB2aWRlbyEKCQkJdGhpcy5jYW12aWQucGF1c2UoKTsKCQkJdGhpcy5jYW12aWQuc3JjT2JqZWN0ID0gbnVsbDsKCQkJdGhpcy5jYW1zdHJlYW0gPSBudWxsOwoJCQljbGVhckludGVydmFsKHRoaXMuY2FtaW50ZXJ2YWwpOwoJCX0KCX0sCglzdGFydDogZnVuY3Rpb24gKCkgewoJCXRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoIjJkIik7CgkJdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gMTsKCQl0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yOwoJCXRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yOwoJCXRoaXMuY29udGV4dC5iZWdpblBhdGgoKTsKCQl0aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGggKyAyLCB0aGlzLmNhbnZhcy5oZWlnaHQgKyAyKTsKCQl0aGlzLmNvbnRleHQuc3Ryb2tlKCk7CgkJdGhpcy50ZXN0PTA7CgkJdGhpcy5jYW52YXMuc3R5bGUuaW1hZ2VSZW5kZXJpbmcgPSAiUGl4ZWxhdGVkIjsKCX0sCgljYW1naG9zdDogMCwKCXRpY2s6IGZ1bmN0aW9uIChzcHJpdGVzLG1vbml0b3JzKSB7CgkJdGhpcy5ldmVudHMudGljay5mb3JFYWNoKChmdW5jdCkgPT4gewoJCQl0cnl7CgkJCQlmdW5jdCgpOwoJCQl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcigicmVuZGVyZXIgcmFuIGV2ZW50LCBidXQgYW4gZXJyb3Igd2FzIHRocm93bi4iLGUpfQoJCX0pOwoJCXRoaXMuY29udGV4dC5nbG9iYWxBbHBoYSA9IDE7CgkJdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7CgkJdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjsKCQl0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7CgkJdGhpcy5jb250ZXh0LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoICsgMiwgdGhpcy5jYW52YXMuaGVpZ2h0ICsgMik7CgkJdGhpcy5jb250ZXh0LnN0cm9rZSgpOwoJCXRoaXMuY29udGV4dC53ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTsKCQl0aGlzLmNvbnRleHQubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7CgkJdGhpcy5jb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlOwoJCWlmICh0aGlzLmNhbXJ1bikgewoJCQl0aGlzLmNhbWNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxOwoJCQl0aGlzLmNhbWNvbnRleHQuZHJhd0ltYWdlKHRoaXMuY2FtdmlkLDAsMCx0aGlzLmNhbWNhbnZhcy53aWR0aCx0aGlzLmNhbWNhbnZhcy5oZWlnaHQpOwoJCQl0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxIC0gKHRoaXMuY2FtZ2hvc3QgLyAxMDApOwoJCQl0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuY2FtdmlkLDAsMCx0aGlzLmNhbnZhcy53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQpOwoJCQl0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxOwoJCX0KCQl0cnl7CgkJCXRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5iZywwLDAsdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0KTsKCQl9Y2F0Y2goZSl7fQoJCWZvciAodmFyIGkgaW4gc3ByaXRlcykgewoJCQlzcHJpdGVzW2ldOwoJCQl0aGlzLl9kcmF3U3ByaXRlKHNwcml0ZXNbaV0pOwoJCX0KCQlmb3IgKHZhciBpIGluIG1vbml0b3JzKSB7CgkJCW1vbml0b3JzW2ldOwoJCQl0aGlzLl9kcmF3TW9uaXRvcihtb25pdG9yc1tpXSk7CgkJfQoJCXRoaXMuZXZlbnRzLnRpY2tlZC5mb3JFYWNoKChmdW5jdCkgPT4gewoJCQl0cnl7CgkJCQlmdW5jdCgpOwoJCQl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcigicmVuZGVyZXIgcmFuIGV2ZW50LCBidXQgYW4gZXJyb3Igd2FzIHRocm93bi4iLGUpfQoJCX0pOwoJfSwKCWV2ZW50czp7CgkJYmVmb3JlZHJhdzpbXSwKCQlhZnRlcmRyYXc6W10sCgkJZHJhd3Nwcml0ZTpbXSwKCQliZWZvcmVtb25pdG9yZHJhdzpbXSwKCQlhZnRlcm1vbml0b3JkcmF3OltdLAoJCXRpY2s6W10sCgkJdGlja2VkOltdCgl9LAoJYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gKG5hbWUsZnVuY3QpIHsKCQlpZiAodGhpcy5ldmVudHNbbmFtZS50b0xvd2VyQ2FzZSgpXSkgewoJCQl0aGlzLmV2ZW50c1tuYW1lLnRvTG93ZXJDYXNlKCldLnB1c2goZnVuY3QpOwoJCX0gZWxzZSB7CgkJCWNvbnNvbGUud2FybigicmVuZGVyZXIgdHJpZWQgYWRkaW5nIGV2ZW50IFwiIituYW1lKyJcIiBidXQgY2FudCBmaW5kIGl0LiBjaGVjayB0aGUgc3BlbGxpbmcgYW5kIHRyeSBhZ2Fpbi4iKTsKCQl9Cgl9LAoJd2lkdGg6NjAwLAoJaGVpZ2h0OjM2MCwKCWdldFNjYWxlSW5mbzogZnVuY3Rpb24gKHgseSx3aWR0aCxoZWlnaHQpIHsKCQl2YXIgc3cgPSB0aGlzLmNhbnZhcy53aWR0aC90aGlzLndpZHRoOwoJCXZhciBzaCA9IHRoaXMuY2FudmFzLmhlaWdodC90aGlzLmhlaWdodDsKCQlyZXR1cm4gewoJCQl4OnN3KngsCgkJCXk6c2gqeSwKCQkJdzpzdyp3aWR0aCwKCQkJaDpzaCpoZWlnaHQsCgkJCXNjYWxld2lkdGg6c3csCgkJCXNjYWxlaGVpZ2h0OnNoCgkJfTsKCX0sCglkcmF3SW1hZ2U6IGZ1bmN0aW9uIChpbWcseCx5LHcsaCkgewoJCXZhciBzaSA9IHRoaXMuZ2V0U2NhbGVJbmZvKHgseSx3LGgpOwoJCXRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1nLHNpLngsc2kueSxzaS53LHNpLmgpOwoJfSwKCXRyYW5zbGF0ZTogZnVuY3Rpb24gKHgseSkgewoJCXZhciBzaSA9IHRoaXMuZ2V0U2NhbGVJbmZvKHgseSwwLDApOwoJCXRoaXMuY29udGV4dC50cmFuc2xhdGUoc2kueCxzaS55KTsKCX0sCglfZHJhd1Nwcml0ZTogZnVuY3Rpb24gKGpzb24pIHsKCQl0aGlzLmV2ZW50cy5iZWZvcmVkcmF3LmZvckVhY2goKGZ1bmN0KSA9PiB7CgkJCXRyeXsKCQkJCWZ1bmN0KCk7CgkJCX1jYXRjaChlKXtjb25zb2xlLmVycm9yKCJyZW5kZXJlciByYW4gZXZlbnQsIGJ1dCBhbiBlcnJvciB3YXMgdGhyb3duLiIsZSl9CgkJfSk7CgkJdGhpcy5jb250ZXh0LnNhdmUoKTsKCQkvL3VzZSB0aGUgdHJ5IHRvIG5vdCB0aHJvdyBhbiBlcnJvciB3aGVuIHJlbmRlcmVyaW5nIGZhaWxlZCwgc28gdGhlIHJlbmRlcmVyIGtlZXBzIHRpY2tpbmcuCgkJdHJ5ewoJCQl0aGlzLmV2ZW50cy5kcmF3c3ByaXRlLmZvckVhY2goKGZ1bmN0KSA9PiB7CgkJCQl0cnl7CgkJCQkJZnVuY3QoanNvbik7CgkJCQl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcigicmVuZGVyZXIgcmFuIGV2ZW50LCBidXQgYW4gZXJyb3Igd2FzIHRocm93bi4iLGUpfQoJCQl9KTsKCQkJdmFyIF9fY2FsY3VsYXRlZF94ID0ganNvbi54OwoJCQl2YXIgX19jYWxjdWxhdGVkX3kgPSAwIC0ganNvbi55OwoJCQl2YXIgZ2hvc3QgPSBqc29uLmdob3N0OwoJCQlpZiAoZ2hvc3QgPiAxMDApIHsKCQkJCWdob3N0ID0gMTAwOwoJCQl9CgkJCWlmIChnaG9zdCA8IDApIHsKCQkJCWdob3N0ID0gMDsKCQkJfQoJCQl0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxIC0gKGdob3N0IC8gMTAwKTsKCQkJLy90aGlzLmNvbnRleHQudHJhbnNsYXRlKHRoaXMuY2FudmFzLndpZHRoLzIranNvbi54K19fY2FsY3VsYXRlZF94LCB0aGlzLmNhbnZhcy5oZWlnaHQvMitfX2NhbGN1bGF0ZWRfeSk7CgkJCXRoaXMudHJhbnNsYXRlKHRoaXMud2lkdGgvMitqc29uLngrX19jYWxjdWxhdGVkX3gsIHRoaXMuaGVpZ2h0LzIrX19jYWxjdWxhdGVkX3kpOyAvL3RoaXMgbW92ZXMgdGhlIGltYWdlIHRvIHRoZSBzcHJpdGUgcG9zaXRpb24uCgkJCXRoaXMuY29udGV4dC5yb3RhdGUoKGpzb24uZGlyZWN0aW9uIC0gOTApKk1hdGguUEkvMTgwKTsKCQkJaWYgKGpzb24uZmxpcCA9PSAiaG9yIikgewoJCQkJdGhpcy5jb250ZXh0LnNjYWxlKC0xLDEpOwoJCQl9IGVsc2UgewoJCQkJaWYgKGpzb24uZmxpcCA9PSAidmVyIikgewoJCQkJCXRoaXMuY29udGV4dC5zY2FsZSgxLC0xKTsKCQkJCX0KCQkJfQoJCQl0aGlzLmRyYXdJbWFnZShqc29uLmltYWdlLCBqc29uLndpZHRoLy0yLCBqc29uLmhlaWdodC8tMiwganNvbi53aWR0aCwganNvbi5oZWlnaHQpOyAvL2RyYXcgdGhlIGltYWdlIGFuZCBvZmZzZXQgaXQgc28gaXQgcm90YXRlcyBpbiB0aGUgY2VudGVyLgoJCX1jYXRjaChlKXt9CgkJdGhpcy5jb250ZXh0LnJlc3RvcmUoKTsKCQl0aGlzLmV2ZW50cy5hZnRlcmRyYXcuZm9yRWFjaCgoZnVuY3QpID0+IHsKCQkJdHJ5ewoJCQkJZnVuY3QoKTsKCQkJfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoInJlbmRlcmVyIHJhbiBldmVudCwgYnV0IGFuIGVycm9yIHdhcyB0aHJvd24uIixlKX0KCQl9KTsKCX0sCglfZHJhd01vbml0b3I6IGZ1bmN0aW9uIChqc29uKSB7CgkJLy9TY2FsZSBVcGRhdGUhIQoJCS8vdGhpcyBhbHNvIGZpeGVzIHNvbWUgYnVncyB3aGVuIHJlbmRlcmluZyB2YXJzCgkJdGhpcy5ldmVudHMuYmVmb3JlbW9uaXRvcmRyYXcuZm9yRWFjaCgoZnVuY3QpID0+IHsKCQkJdHJ5ewoJCQkJZnVuY3QoKTsKCQkJfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoInJlbmRlcmVyIHJhbiBldmVudCwgYnV0IGFuIGVycm9yIHdhcyB0aHJvd24uIixlKX0KCQl9KTsKCQl0aGlzLmNvbnRleHQuc2F2ZSgpOwoJCS8vdXNlIHRoZSB0cnkgdG8gbm90IHRocm93IGFuIGVycm9yIHdoZW4gcmVuZGVyZXJpbmcgZmFpbGVkLCBzbyB0aGUgcmVuZGVyZXIga2VlcHMgdGlja2luZy4KCQl0cnl7CgkJCWlmIChqc29uLnZpc2libGUpIHsKCQkJCXRoaXMuY29udGV4dC5nbG9iYWxBbHBoYSA9IDE7CgkJCQl0aGlzLmNvbnRleHQudHJhbnNsYXRlKDAsMCk7CgkJCQl2YXIgdGV4dHNjYWxlID0gdGhpcy5nZXRTY2FsZUluZm8oKS5zY2FsZXdpZHRoOwoJCQkJcmVuZGVyZXIuY29udGV4dC5mb250ID0gJ2JvbGQgJysoMTUqdGhpcy5nZXRTY2FsZUluZm8oKS5zY2FsZXdpZHRoKSsncHggYXJpYWwnOwoJCQkJdmFyIHRleHRXaWR0aCA9IHJlbmRlcmVyLmNvbnRleHQubWVhc3VyZVRleHQoanNvbi52YWx1ZSkud2lkdGgvdGV4dHNjYWxlOwoJCQkJdmFyIHRleHROYW1lV2lkdGggPSByZW5kZXJlci5jb250ZXh0Lm1lYXN1cmVUZXh0KGpzb24ubmFtZSkud2lkdGgvdGV4dHNjYWxlOwoJCQkJdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gMTsKCQkJCXJlbmRlcmVyLmNvbnRleHQuZmlsbFN0eWxlID0gIiM4NjhlOTYiOwoJCQkJcmVuZGVyZXIuZmlsbFJlY3QoanNvbi54LTIsanNvbi55LTIsMjQrdGV4dE5hbWVXaWR0aCt0ZXh0V2lkdGgsMjQpOwoJCQkJcmVuZGVyZXIuY29udGV4dC5maWxsU3R5bGUgPSAiI2NlZDRkYSI7CgkJCQlyZW5kZXJlci5maWxsUmVjdChqc29uLngsanNvbi55LDIwK3RleHROYW1lV2lkdGgrdGV4dFdpZHRoLDIwKTsJCgkJCQlyZW5kZXJlci5jb250ZXh0LmZpbGxTdHlsZSA9ICIjZmY4YzAwIjsKCQkJCXJlbmRlcmVyLmZpbGxSZWN0KGpzb24ueCt0ZXh0TmFtZVdpZHRoKzEwLGpzb24ueSszLDUrdGV4dFdpZHRoLDE1KTsKCQkJCXJlbmRlcmVyLmNvbnRleHQuZmlsbFN0eWxlID0gIndoaXRlIjsKCQkJCXJlbmRlcmVyLmZpbGxUZXh0KGpzb24udmFsdWUsIGpzb24ueCt0ZXh0TmFtZVdpZHRoKzEwLGpzb24ueSArIDE1KTsKCQkJCXJlbmRlcmVyLmNvbnRleHQuZmlsbFN0eWxlID0gImJsYWNrIjsKCQkJCXJlbmRlcmVyLmZpbGxUZXh0KGpzb24ubmFtZSwganNvbi54ICsgNixqc29uLnkgKyAxNSk7CgkJCQlyZXR1cm4gewoJCQkJCXdpZHRoOjc0K3RleHROYW1lV2lkdGgrdGV4dFdpZHRoLAoJCQkJCWhlaWdodDoyNCwKCQkJCQl4Ompzb24ueCwKCQkJCQl5Ompzb24ueQoJCQkJfTsKCQkJfQoJCX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpO30KCQl0aGlzLmNvbnRleHQucmVzdG9yZSgpOwoJCXRoaXMuZXZlbnRzLmFmdGVybW9uaXRvcmRyYXcuZm9yRWFjaCgoZnVuY3QpID0+IHsKCQkJdHJ5ewoJCQkJZnVuY3QoKTsKCQkJfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoInJlbmRlcmVyIHJhbiBldmVudCwgYnV0IGFuIGVycm9yIHdhcyB0aHJvd24uIixlKX0KCQl9KTsKCX0sCglmaWxsUmVjdDogZnVuY3Rpb24gKHgseSx3LGgpIHsKCQl2YXIgc2kgPSB0aGlzLmdldFNjYWxlSW5mbyh4LHksdyxoKTsKCQl0aGlzLmNvbnRleHQuZmlsbFJlY3Qoc2kueCxzaS55LHNpLncsc2kuaCk7Cgl9LAoJZmlsbFRleHQ6IGZ1bmN0aW9uICh0eHQseCx5KSB7CgkJdmFyIHNpID0gdGhpcy5nZXRTY2FsZUluZm8oeCx5LDAsMCk7CgkJdGhpcy5jb250ZXh0LmZpbGxUZXh0KHR4dCxzaS54LHNpLnkpOwoJfSwKCWNvbG9yOiIjZmZmZmZmIiwKCWdldENvbG9yRWZmZWN0OiBmdW5jdGlvbiAoaW1nLHIsZyxiKSB7CgkJdHJ5ewoJCQl2YXIgY3ZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CgkJCXZhciBjdHggPSBjdnMuZ2V0Q29udGV4dCgiMmQiKTsKCQkJY3ZzLndpZHRoID0gaW1nLndpZHRoOwoJCQljdnMuaGVpZ2h0ID0gaW1nLmhlaWdodDsKCQkJY3R4LmRyYXdJbWFnZShpbWcsMCwwLGN2cy53aWR0aCxjdnMuaGVpZ2h0KTsKCQkJdmFyIGltZ2RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsMCxjdnMud2lkdGgsY3ZzLmhlaWdodCk7CgkJCXZhciBpbWFnZURhdGEgPSBpbWdkYXRhLmRhdGE7CgkJCWZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VEYXRhLmxlbmd0aDsgaSArPSA0KSB7CgkJCQlpbWFnZURhdGFbaV0gKz0gcjsKCQkJCWltYWdlRGF0YVtpKzFdICs9IGc7CgkJCQlpbWFnZURhdGFbaSsyXSArPSBnOwoJCQl9CgkJCWN0eC5wdXRJbWFnZURhdGEoaW1nZGF0YSwwLDApOwoJCQlyZXR1cm4gY3ZzLnRvRGF0YVVSTCgpOwoJCX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpO30KCX0sCglnZXRSYW5kb21Db2xvckVmZmVjdDogZnVuY3Rpb24gKGltZyxyYW5kb21uZXNzKSB7CgkJdHJ5ewoJCQl2YXIgY3ZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CgkJCXZhciBjdHggPSBjdnMuZ2V0Q29udGV4dCgiMmQiKTsKCQkJY3ZzLndpZHRoID0gaW1nLndpZHRoOwoJCQljdnMuaGVpZ2h0ID0gaW1nLmhlaWdodDsKCQkJY3R4LmRyYXdJbWFnZShpbWcsMCwwLGN2cy53aWR0aCxjdnMuaGVpZ2h0KTsKCQkJdmFyIGltZ2RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsMCxjdnMud2lkdGgsY3ZzLmhlaWdodCk7CgkJCXZhciBpbWFnZURhdGEgPSBpbWdkYXRhLmRhdGE7CgkJCWZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VEYXRhLmxlbmd0aDsgaSArPSA0KSB7CgkJCQlpbWFnZURhdGFbaV0gKz0gTWF0aC5yYW5kb20oKSpyYW5kb21uZXNzOwoJCQkJaW1hZ2VEYXRhW2krMV0gKz0gTWF0aC5yYW5kb20oKSpyYW5kb21uZXNzOwoJCQkJaW1hZ2VEYXRhW2krMl0gKz0gTWF0aC5yYW5kb20oKSpyYW5kb21uZXNzOwoJCQl9CgkJCWN0eC5wdXRJbWFnZURhdGEoaW1nZGF0YSwwLDApOwoJCQlyZXR1cm4gY3ZzLnRvRGF0YVVSTCgpOwoJCX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpO30KCX0sCglnZXRHbGl0Y2hDb2xvckVmZmVjdDogZnVuY3Rpb24gKGltZyxyYW5kb21uZXNzKSB7CgkJdHJ5ewoJCQl2YXIgY3ZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CgkJCXZhciBjdHggPSBjdnMuZ2V0Q29udGV4dCgiMmQiKTsKCQkJY3ZzLndpZHRoID0gaW1nLndpZHRoOwoJCQljdnMuaGVpZ2h0ID0gaW1nLmhlaWdodDsKCQkJY3R4LmRyYXdJbWFnZShpbWcsMCwwLGN2cy53aWR0aCxjdnMuaGVpZ2h0KTsKCQkJdmFyIGltZ2RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsMCxjdnMud2lkdGgsY3ZzLmhlaWdodCk7CgkJCXZhciBpbWFnZURhdGEgPSBpbWdkYXRhLmRhdGE7CgkJCWZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VEYXRhLmxlbmd0aDsgaSArPSA0KSB7CgkJCQlpbWFnZURhdGFbaV0gPSBNYXRoLnJhbmRvbSgpKnJhbmRvbW5lc3M7CgkJCQlpbWFnZURhdGFbaSsxXSA9IE1hdGgucmFuZG9tKCkqcmFuZG9tbmVzczsKCQkJCWltYWdlRGF0YVtpKzJdID0gTWF0aC5yYW5kb20oKSpyYW5kb21uZXNzOwoJCQl9CgkJCWN0eC5wdXRJbWFnZURhdGEoaW1nZGF0YSwwLDApOwoJCQlyZXR1cm4gY3ZzLnRvRGF0YVVSTCgpOwoJCX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpO30KCX0sCglnZXRJbnZlcnRDb2xvckVmZmVjdDogZnVuY3Rpb24gKGltZykgewoJCXRyeXsKCQkJdmFyIGN2cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwoJCQl2YXIgY3R4ID0gY3ZzLmdldENvbnRleHQoIjJkIik7CgkJCWN2cy53aWR0aCA9IGltZy53aWR0aDsKCQkJY3ZzLmhlaWdodCA9IGltZy5oZWlnaHQ7CgkJCWN0eC5kcmF3SW1hZ2UoaW1nLDAsMCxjdnMud2lkdGgsY3ZzLmhlaWdodCk7CgkJCXZhciBpbWdkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLDAsY3ZzLndpZHRoLGN2cy5oZWlnaHQpOwoJCQl2YXIgaW1hZ2VEYXRhID0gaW1nZGF0YS5kYXRhOwoJCQlmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRGF0YS5sZW5ndGg7IGkgKz0gNCkgewoJCQkJdmFyIHIgPSBpbWFnZURhdGFbaV07CgkJCQl2YXIgZyA9IGltYWdlRGF0YVtpKzFdOwoJCQkJdmFyIGIgPSBpbWFnZURhdGFbaSsyXTsKCQkJCWltYWdlRGF0YVtpXSA9IGI7CgkJCQlpbWFnZURhdGFbaSsxXSA9IGc7CgkJCQlpbWFnZURhdGFbaSsyXSA9IHI7CgkJCX0KCQkJY3R4LnB1dEltYWdlRGF0YShpbWdkYXRhLDAsMCk7CgkJCXJldHVybiBjdnMudG9EYXRhVVJMKCk7CgkJfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSk7fQoJfSwKCWdldEludmVydENvbG9yRWZmZWN0OiBmdW5jdGlvbiAoaW1nKSB7CgkJdHJ5ewoJCQl2YXIgY3ZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CgkJCXZhciBjdHggPSBjdnMuZ2V0Q29udGV4dCgiMmQiKTsKCQkJY3ZzLndpZHRoID0gaW1nLndpZHRoOwoJCQljdnMuaGVpZ2h0ID0gaW1nLmhlaWdodDsKCQkJY3R4LmRyYXdJbWFnZShpbWcsMCwwLGN2cy53aWR0aCxjdnMuaGVpZ2h0KTsKCQkJdmFyIGltZ2RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsMCxjdnMud2lkdGgsY3ZzLmhlaWdodCk7CgkJCXZhciBpbWFnZURhdGEgPSBpbWdkYXRhLmRhdGE7CgkJCWZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VEYXRhLmxlbmd0aDsgaSArPSA0KSB7CgkJCQl2YXIgciA9IGltYWdlRGF0YVtpXTsKCQkJCXZhciBnID0gaW1hZ2VEYXRhW2krMV07CgkJCQl2YXIgYiA9IGltYWdlRGF0YVtpKzJdOwoJCQkJaW1hZ2VEYXRhW2ldID0gYjsKCQkJCWltYWdlRGF0YVtpKzFdID0gZzsKCQkJCWltYWdlRGF0YVtpKzJdID0gcjsKCQkJfQoJCQljdHgucHV0SW1hZ2VEYXRhKGltZ2RhdGEsMCwwKTsKCQkJcmV0dXJuIGN2cy50b0RhdGFVUkwoKTsKCQl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKTt9Cgl9LAoJY29tcG9uZW50VG9IZXg6ZnVuY3Rpb24gKGMpIHsKCSAgdmFyIGhleCA9IGMudG9TdHJpbmcoMTYpOwoJICByZXR1cm4gaGV4Lmxlbmd0aCA9PSAxID8gIjAiICsgaGV4IDogaGV4OwoJfSwKCXJnYlRvSGV4OmZ1bmN0aW9uIChyLCBnLCBiKSB7CgkgIHJldHVybiAiIyIgKyB0aGlzLmNvbXBvbmVudFRvSGV4KHIpICsgdGhpcy5jb21wb25lbnRUb0hleChnKSArIHRoaXMuY29tcG9uZW50VG9IZXgoYik7Cgl9LAoJaGV4VG9SZ2I6ZnVuY3Rpb24gKGhleCkgewoJICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcZF17Mn0pKFthLWZcZF17Mn0pKFthLWZcZF17Mn0pJC9pLmV4ZWMoaGV4KTsKCSAgICByZXR1cm4gcmVzdWx0ID8gewoJICAgICAgICByOiBwYXJzZUludChyZXN1bHRbMV0sIDE2KSwKCSAgICAgICAgZzogcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksCgkgICAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpCgkgICAgfQoJICAgICA6IG51bGw7Cgl9LAoJZ2V0Q29sb3JBdFBvczogZnVuY3Rpb24gKHgseSkgewoJCXZhciBfX2NhbGN1bGF0ZWRfeCA9IHg7CgkJdmFyIF9fY2FsY3VsYXRlZF95ID0gMCAtIHk7CgkJdmFyIHBvcyA9IHRoaXMuZ2V0U2NhbGVJbmZvKHRoaXMud2lkdGgvMit4K19fY2FsY3VsYXRlZF94LCB0aGlzLmhlaWdodC8yK19fY2FsY3VsYXRlZF95LDAsMCk7CgkJdmFyIGMgPSB0aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKHBvcy54LCBwb3MueSwgMSwgMSkuZGF0YTsKCQlyZXR1cm4gdGhpcy5yZ2JUb0hleChjWzBdLGNbMV0sY1syXSk7Cgl9LAoJY2hhbmdlQ29sb3JJbkltYWdlOiBmdW5jdGlvbiAoaW1nLGZpbmQscmVwbGFjZSkgewoJCXRyeXsKCQkJdmFyIGN2cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwoJCQl2YXIgY3R4ID0gY3ZzLmdldENvbnRleHQoIjJkIik7CgkJCWN2cy53aWR0aCA9IGltZy53aWR0aDsKCQkJY3ZzLmhlaWdodCA9IGltZy5oZWlnaHQ7CgkJCWN0eC5kcmF3SW1hZ2UoaW1nLDAsMCxjdnMud2lkdGgsY3ZzLmhlaWdodCk7CgkJCXZhciByZ2JGaW5kID0gdGhpcy5oZXhUb1JnYihmaW5kKTsKCQkJdmFyIHJnYlJlcGxhY2UgPSB0aGlzLmhleFRvUmdiKHJlcGxhY2UpOwoJCQl2YXIgaW1nZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwwLGN2cy53aWR0aCxjdnMuaGVpZ2h0KTsKCQkJdmFyIGltYWdlRGF0YSA9IGltZ2RhdGEuZGF0YTsKCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEubGVuZ3RoOyBpICs9IDQpIHsKCQkJCXZhciByID0gaW1hZ2VEYXRhW2ldOwoJCQkJdmFyIGcgPSBpbWFnZURhdGFbaSsxXTsKCQkJCXZhciBiID0gaW1hZ2VEYXRhW2krMl07CgkJCQlpZiAocmdiRmluZC5yID0gciAmJiByZ2JGaW5kLmcgPT0gZyAmJiByZ2JGaW5kLmIgPT0gYikgewoJCQkJCS8vZm91bmQgYW4gbWF0Y2ghCgkJCQkJaW1hZ2VEYXRhW2ldID0gcmdiUmVwbGFjZS5yOwoJCQkJCWltYWdlRGF0YVtpKzFdID0gcmdiUmVwbGFjZS5nOwoJCQkJCWltYWdlRGF0YVtpKzJdID0gcmdiUmVwbGFjZS5iOwoJCQkJfQoJCQl9CgkJCWN0eC5wdXRJbWFnZURhdGEoaW1nZGF0YSwwLDApOwoJCQlyZXR1cm4gY3ZzLnRvRGF0YVVSTCgpOwoJCX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpO30KCX0sCgljaGFuZ2VDb2xvcnNJbkltYWdlOiBmdW5jdGlvbiAoaW1nLGZpbmRyZXBsYWNlQXJyYXkpIHsKCQl0cnl7CgkJCXZhciBjdnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKCQkJdmFyIGN0eCA9IGN2cy5nZXRDb250ZXh0KCIyZCIpOwoJCQljdnMud2lkdGggPSBpbWcud2lkdGg7CgkJCWN2cy5oZWlnaHQgPSBpbWcuaGVpZ2h0OwoJCQljdHguZHJhd0ltYWdlKGltZywwLDAsY3ZzLndpZHRoLGN2cy5oZWlnaHQpOwoJCQl2YXIgaW1nZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwwLGN2cy53aWR0aCxjdnMuaGVpZ2h0KTsKCQkJdmFyIGltYWdlRGF0YSA9IGltZ2RhdGEuZGF0YTsKCQkJZm9yICh2YXIgaW5kZXgyID0gMDsgaW5kZXgyIDwgZmluZHJlcGxhY2VBcnJheS5sZW5ndGg7IGluZGV4MiArPSAyKSB7CgkJCQl2YXIgcmdiRmluZCA9IHRoaXMuaGV4VG9SZ2IoZmluZHJlcGxhY2VBcnJheVtpbmRleDJdKTsKCQkJCXZhciByZ2JSZXBsYWNlID0gdGhpcy5oZXhUb1JnYihmaW5kcmVwbGFjZUFycmF5W2luZGV4MisxXSk7CgoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBpbWFnZURhdGEubGVuZ3RoOyBpICs9IDQpIHsKCQkJCQl2YXIgciA9IGltYWdlRGF0YVtpXTsKCQkJCQl2YXIgZyA9IGltYWdlRGF0YVtpKzFdOwoJCQkJCXZhciBiID0gaW1hZ2VEYXRhW2krMl07CgkJCQkJaWYgKHJnYkZpbmQuciA9IHIgJiYgcmdiRmluZC5nID09IGcgJiYgcmdiRmluZC5iID09IGIpIHsKCQkJCQkJLy9mb3VuZCBhbiBtYXRjaCEKCQkJCQkJaW1hZ2VEYXRhW2ldID0gcmdiUmVwbGFjZS5yOwoJCQkJCQlpbWFnZURhdGFbaSsxXSA9IHJnYlJlcGxhY2UuZzsKCQkJCQkJaW1hZ2VEYXRhW2krMl0gPSByZ2JSZXBsYWNlLmI7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQljdHgucHV0SW1hZ2VEYXRhKGltZ2RhdGEsMCwwKTsKCQkJcmV0dXJuIGN2cy50b0RhdGFVUkwoKTsKCQl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKTt9Cgl9Cn07CnJlbmRlcmVyLmNhbWNvbnRleHQgPSByZW5kZXJlci5jYW1jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKc2V0SW50ZXJ2YWwoKCkgPT4gewoJaWYgKHJlbmRlcmVyLmNhbXJ1bikgewoJCXJlbmRlcmVyLmNhbXZpZC5wbGF5KCk7IC8vc3RhcnQgdGhlIHJlY29yZGluZyEKCQlyZW5kZXJlci5jYW12aWQudm9sdW1lID0gMDsgLy9kbyBub3QgZWNobyEKCQlyZW5kZXJlci5jYW1jYW52YXMud2lkdGggPSByZW5kZXJlci5jYW12aWQudmlkZW9XaWR0aDsKCQlyZW5kZXJlci5jYW1jYW52YXMuaGVpZ2h0ID0gcmVuZGVyZXIuY2FtdmlkLnZpZGVvSGVpZ2h0OwoJfSBlbHNlIHsKCQlyZW5kZXJlci5jYW12aWQucGF1c2UoKTsgLy9zdG9wIHRoZSByZWNvcmRpbmcKCX0KfSwxMCkK"));eval(atob("d2luZG93LmF1ZGlvRW5naW5lID0gewoJYWRkVG9QcmVsb2FkOiBhc3luYyBmdW5jdGlvbiAodXJsKSB7CgkJdmFyIHJlcXVlc3QgPSBhd2FpdCBmZXRjaCh1cmwpOwoJCXZhciBkYXRhID0gYXdhaXQgcmVxdWVzdC5hcnJheUJ1ZmZlcigpOwoJCXdpbmRvdy5hdWRpb0VuZ2luZS5hdWRQcmVsb2FkW3VybF0gPSB3aW5kb3cuYXVkaW9FbmdpbmUuY29weUFycmF5QnVmZmVyKHdpbmRvdy5hdWRpb0VuZ2luZS5hdWRQcmVsb2FkW3VybF0pOwoJfSwKCWF1ZFByZWxvYWQ6IHt9LAoJY29weUFycmF5QnVmZmVyOiBmdW5jdGlvbiAoc3JjKSAgewoJCXZhciBkc3QgPSBuZXcgQXJyYXlCdWZmZXIoc3JjLmJ5dGVMZW5ndGgpOwoJCW5ldyBVaW50OEFycmF5KGRzdCkuc2V0KG5ldyBVaW50OEFycmF5KHNyYykpOwoJCXJldHVybiBkc3Q7Cgl9LAoJc2Z4OnsKCQlhdWRpbzpudWxsLAoJCWF1ZGlvZWxlbWVudHM6W10sCgkJcGxheTphc3luYyBmdW5jdGlvbiAoYSkgewoJCQkvKioKCQkJQnVnIEZpeCEKCQkJCgkJCWZpeGVkIHRoZSBhdWRpbyBidWcgd2hlbiBwbGF5aW5nIG11dGlwbGUgc291bmRzLCBpbmNsdWRpbmcgbG9uZyBvbmVzLAoJCQltYWtpbmcgaXQgaW1wb3NpYmxlIHRvIHN0b3AgaW4gZGVza3RvcCBhcHAuCgkJCQoJCQkqLwoJCQl3aW5kb3cuYXVkaW9FbmdpbmUuYXVkaW9SdW5uaW5nID0gdHJ1ZTsKCQkJaWYgKCEod2luZG93LmF1ZGlvRW5naW5lLmF1ZFByZWxvYWRbYV0pKSB7CgkJCQl2YXIgcmVxdWVzdCA9IGF3YWl0IGZldGNoKGEpOwoJCQkJdmFyIGRhdGEgPSBhd2FpdCByZXF1ZXN0LmFycmF5QnVmZmVyKCk7CgkJCQl3aW5kb3cuYXVkaW9FbmdpbmUuYXVkUHJlbG9hZFthXSA9IHdpbmRvdy5hdWRpb0VuZ2luZS5jb3B5QXJyYXlCdWZmZXIoZGF0YSk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgZGF0YSA9IHdpbmRvdy5hdWRpb0VuZ2luZS5jb3B5QXJyYXlCdWZmZXIod2luZG93LmF1ZGlvRW5naW5lLmF1ZFByZWxvYWRbYV0pOwoJCQl9CgkJCXZhciBhdWRpb0J1ZmZlciA9IGF3YWl0IHdpbmRvdy5hdWRpb0VuZ2luZS5kZWNvZGVBdWRpb0RhdGFBc3luYyhkYXRhKTsKCQkJdmFyIHNvdXJjZSA9IHdpbmRvdy5hdWRpb0VuZ2luZS5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOwoJCQlpZiAod2luZG93LmF1ZGlvRW5naW5lLmF1ZGlvUnVubmluZykgewoJCQkJc291cmNlLmJ1ZmZlciA9IGF1ZGlvQnVmZmVyOwoJCQkJdGhpcy5zb3VyY2UgPSBzb3VyY2U7CgkJCQkKCQkJCXNvdXJjZS5jb25uZWN0KHdpbmRvdy5hdWRpb0VuZ2luZS5jb250ZXh0LmRlc3RpbmF0aW9uKTsKCQkJCXNvdXJjZS5sb29wID0gZmFsc2U7CgkJCQlzb3VyY2Uuc3RhcnQoKTsKCQkJCXdpbmRvdy5hdWRpb0VuZ2luZS5zb3VyY2VzLnB1c2goc291cmNlKTsKCQkJCXNvdXJjZS5vbmVuZGVkID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBkYXQgPSBbXTsKCQkJCQlmb3IgKHZhciBvYmogb2Ygd2luZG93LmF1ZGlvRW5naW5lLnNvdXJjZXMpIHsKCQkJCQkJaWYgKCEob2JqID09IHNvdXJjZSkpIHsKCQkJCQkJCWRhdC5wdXNoKG9iaik7CgkJCQkJCX0KCQkJCQl9CgkJCQkJd2luZG93LmF1ZGlvRW5naW5lLnNvdXJjZXMgPSBkYXQ7CgkJCQl9OwoJCQl9Ci8qIAkJCS8vYnVnIHBhY2ggc3RhcnRzIGhlcmUKCQkJdGhpcy5hdWRpby5vbmVuZGVkID0gZnVuY3Rpb24gKCkgewoJCQkJZGVsZXRlIGF1ZGlvRW5naW5lLnNmeC5hdWRpb2VsZW1lbnRzLmluZGV4T2YodGhpcy5hdWRpbyk7CgkJCQl2YXIgYWxsU2Z4ID0gW107CgkJCQlmb3IgKHZhciBpIGluIGF1ZGlvRW5naW5lLnNmeC5hdWRpb2VsZW1lbnRzKSB7CgkJCQkJaWYgKGF1ZGlvRW5naW5lLnNmeC5hdWRpb2VsZW1lbnRzKSB7CgkJCQkJCWFsbFNmeC5wdXNoKGF1ZGlvRW5naW5lLnNmeC5hdWRpb2VsZW1lbnRzW2ldKTsKCQkJCQl9CgkJCQl9CgkJCQlhdWRpb0VuZ2luZS5zZnguYXVkaW9lbGVtZW50cyA9IGFsbFNmeDsKCQkJfTsgKi8KCQl9Cgl9LAoJZGVjb2RlQXVkaW9EYXRhQXN5bmM6IChkYXRhKSA9PiB7CgkJcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4gewoJCQl3aW5kb3cuYXVkaW9FbmdpbmUuY29udGV4dC5kZWNvZGVBdWRpb0RhdGEoZGF0YSxyZXNvbHZlLHJlamVjdCk7CgkJfSkKCX0sCglzb3VyY2VzOiBbCgkKCV0sCglhdWRpb1J1bm5pbmc6ZmFsc2UsCgliZ206ewoJCWF1ZGlvOntzcmM6IiJ9LAoJCWlzUGxheWluZzpmYWxzZSwKCQlydW5uaW5nOmZhbHNlLAoJCXN0b3BSdW5uaW5nU291cmNlOiAoKSA9PiB7CgkJCWlmICh0aGlzLnNvdXJjZSkgewoJCQkJdHJ5ewoJCQkJCXRoaXMuc291cmNlLnN0b3AoKTsKCQkJCX1jYXRjaChlKXt9CgkJCX0KCQl9LAoJCXBsYXk6YXN5bmMgZnVuY3Rpb24gKCkgewoJCQl0cnl7CgkJCQl0aGlzLnJ1bm5pbmcgPSB0cnVlOwoJCQkJdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTsKCQkJCXRoaXMuc3RvcFJ1bm5pbmdTb3VyY2UoKTsKCQkJCXZhciBzb3VyY2UgPSB3aW5kb3cuYXVkaW9FbmdpbmUuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKCQkJCXdpbmRvdy5hdWRpb0VuZ2luZS5zb3VyY2VzLnB1c2goc291cmNlKTsKCQkJCXdpbmRvdy5hdWRpb0VuZ2luZS5hdWRpb1J1bm5pbmcgPSB0cnVlOwoJCQkJaWYgKCEod2luZG93LmF1ZGlvRW5naW5lLmF1ZFByZWxvYWRbdGhpcy5hdWRpby5zcmNdKSkgewoJCQkJCXRoaXMuc3RvcFJ1bm5pbmdTb3VyY2UoKTsKCQkJCQl2YXIgcmVxdWVzdCA9IGF3YWl0IGZldGNoKHRoaXMuYXVkaW8uc3JjKTsKCQkJCQl0aGlzLnN0b3BSdW5uaW5nU291cmNlKCk7CgkJCQkJdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTsKCQkJCQl0aGlzLnN0b3BSdW5uaW5nU291cmNlKCk7CgkJCQkJdmFyIGRhdGEgPSBhd2FpdCByZXF1ZXN0LmFycmF5QnVmZmVyKCk7CgkJCQkJdGhpcy5zdG9wUnVubmluZ1NvdXJjZSgpOwoJCQkJCXRoaXMuaXNQbGF5aW5nID0gZmFsc2U7CgkJCQkJd2luZG93LmF1ZGlvRW5naW5lLmF1ZFByZWxvYWRbdGhpcy5hdWRpby5zcmNdID0gd2luZG93LmF1ZGlvRW5naW5lLmNvcHlBcnJheUJ1ZmZlcihkYXRhKTsKCQkJCX0gZWxzZSB7CgkJCQkJdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTsKCQkJCQl0aGlzLnN0b3BSdW5uaW5nU291cmNlKCk7CgkJCQkJdmFyIGRhdGEgPSB3aW5kb3cuYXVkaW9FbmdpbmUuY29weUFycmF5QnVmZmVyKHdpbmRvdy5hdWRpb0VuZ2luZS5hdWRQcmVsb2FkW3RoaXMuYXVkaW8uc3JjXSk7CgkJCQkJdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTsKCQkJCQl0aGlzLnN0b3BSdW5uaW5nU291cmNlKCk7CgkJCQl9CgkJCQl0aGlzLmlzUGxheWluZyA9IGZhbHNlOwoJCQkJdGhpcy5zdG9wUnVubmluZ1NvdXJjZSgpOwoJCQkJdmFyIGF1ZGlvQnVmZmVyID0gYXdhaXQgd2luZG93LmF1ZGlvRW5naW5lLmRlY29kZUF1ZGlvRGF0YUFzeW5jKGRhdGEpOwoJCQkJdGhpcy5zdG9wUnVubmluZ1NvdXJjZSgpOwoJCQkJdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTsKCQkJCXNvdXJjZS5idWZmZXIgPSBhdWRpb0J1ZmZlcjsKCQkJCXRoaXMuaXNQbGF5aW5nID0gZmFsc2U7CgkJCQlzb3VyY2UuY29ubmVjdCh3aW5kb3cuYXVkaW9FbmdpbmUuY29udGV4dC5kZXN0aW5hdGlvbik7CgkJCQlzb3VyY2UubG9vcCA9IHRydWU7CgkJCQl0aGlzLmlzUGxheWluZyA9IGZhbHNlOwoJCQkJaWYgKHRoaXMuc291cmNlKSB7CgkJCQkJdHJ5ewoJCQkJCQl0aGlzLnNvdXJjZS5zdG9wKCk7CgkJCQkJfWNhdGNoKGUpe30KCQkJCX0KCQkJCXRoaXMuc291cmNlID0gc291cmNlOwoJCQkJaWYgKHdpbmRvdy5hdWRpb0VuZ2luZS5hdWRpb1J1bm5pbmcpIHsKCQkJCQlpZiAoISh0aGlzLmlzUGxheWluZykpIHsKCQkJCQkJdGhpcy5pc1BsYXlpbmcgPSB0cnVlOwoJCQkJCQlzb3VyY2Uuc3RhcnQoKTsKCQkJCQl9CgkJCQl9CgkJCX1jYXRjaChlKXsKCQkJCWNvbnNvbGUud2FybigiW0F1ZGlvRW5naW5lXTplcnJvciBpZ25vcmVkIiArIGUpOwoJCQl9OwoJCX0sCgkJc2V0U3JjOmZ1bmN0aW9uIChhKSB7CgkJCXRoaXMuYXVkaW8uc3JjID0gYTsKCQl9Cgl9LAoJYXVkUHJlbG9hZDp7CgkJCgl9LAoJc3RvcDpmdW5jdGlvbiAoKSB7CgkJdHJ5ewoJCWlmICh0aGlzLnNmeC5hdWRpbykgewoJCQl0aGlzLnNmeC5hdWRpby5wYXVzZSgpOwoJCQl0aGlzLnNmeC5hdWRpbyA9IG51bGw7CgkJfQoJCXRoaXMuYmdtLnJ1bm5pbmcgPSBmYWxzZTsKCQl0aGlzLmJnbS5pc1BsYXlpbmcgPSBmYWxzZTsKCQl0aGlzLmF1ZGlvUnVubmluZyA9IGZhbHNlOwoJCWZvciAodmFyIHNvdXJjZSBvZiB0aGlzLnNvdXJjZXMpIHsKCQkJdHJ5ewoJCQkJc291cmNlLnN0b3AoKQoJCQl9Y2F0Y2goZSl7fQoJCX0KCQl0aGlzLnNvdXJjZXMgPSBbXTsKCQl9Y2F0Y2goZSl7CgkJCWNvbnNvbGUud2FybigiW0F1ZGlvRW5naW5lXTplcnJvciBpZ25vcmVkIiArIGUpOwoJCX07Cgl9LAoJdGlja0F1ZGlvOmZ1bmN0aW9uICgpIHsKCQkvL2NvbnNvbGUubG9nKHRoaXMuYmdtLmlzUGxheWluZyk7CgkJaWYgKHdpbmRvdy5hdWRpb0VuZ2luZS5iZ20uaXNQbGF5aW5nKSB7CgkJCS8vaWYgKCEod2luZG93LmF1ZGlvRW5naW5lLmJnbS5ydW5uaW5nKSkgewoJCQkvLwl3aW5kb3cuYXVkaW9FbmdpbmUuYmdtLnBsYXkoKTsKCQkJLy99CgkJfSBlbHNlIHsKCQkJdHJ5ewoJCQkJd2luZG93LmF1ZGlvRW5naW5lLmJnbS5ydW5uaW5nID0gZmFsc2U7CgkJCQl3aW5kb3cuYXVkaW9FbmdpbmUuYmdtLnNvdXJjZS5zdG9wKCk7CgkJCX1jYXRjaChlKXt9CgkJfQoJfQp9CndpbmRvdy5hdWRpb0VuZ2luZS5iZ20uYXVkaW8ubG9vcCA9IHRydWU7CnNldEludGVydmFsKHdpbmRvdy5hdWRpb0VuZ2luZS50aWNrQXVkaW8sMSk7CndpbmRvdy5hdWRpb0VuZ2luZS5jb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpOwpzZXRJbnRlcnZhbCgoKSA9PiB7CglpZiAoISh3aW5kb3cuYXVkaW9FbmdpbmUuY29udGV4dC5zdGF0ZSA9PSAicnVubmluZyIpKSB7CgkJd2luZG93LmF1ZGlvRW5naW5lLmNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0Cgl9Cn0sMTApOwovKgp0aGUgaWRlYSB3YXMgdG8gdXNlIGNvbnRleHQsIGJ1dCBzY3JhcHBlZCwgYmVjYXVzZSBvZiBtb3JlIGxvYWQgbGFnIGFuZCBob3cgbXV0Y2ggdGltZSBpdCB0YWtlcwp3aW5kb3cuYXVkaW9FbmdpbmUgPSB7Cgljb250ZXh0Om5ldyBBdWRpb0NvbnRleHQoKSwKCXNvdXJjZTogbnVsbCwKCXNvdXJjZXM6W10sCglhcGlHZXRBdWRpbzogYXN5bmMgKGF1ZGlvQnVmZmVyRGF0YSxjYWxsYmFjaykgPT4gewoJICBjb25zdCBjb250ZXh0ID0gd2luZG93LmF1ZGlvRW5naW5lLmNvbnRleHQ7CgkJZnVuY3Rpb24gY29weShzcmMpICB7CgkJCXZhciBkc3QgPSBuZXcgQXJyYXlCdWZmZXIoc3JjLmJ5dGVMZW5ndGgpOwoJCQluZXcgVWludDhBcnJheShkc3QpLnNldChuZXcgVWludDhBcnJheShzcmMpKTsKCQkJcmV0dXJuIGRzdDsKCQl9CgkgIGNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGNvcHkoYXVkaW9CdWZmZXJEYXRhKSxmdW5jdGlvbiAoYXVkaW9CdWZmZXIpIHsKCQl3aW5kb3cuYXVkaW9FbmdpbmUuc291cmNlID0gY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKCQl2YXIgc291cmNlID0gd2luZG93LmF1ZGlvRW5naW5lLnNvdXJjZQoJCXNvdXJjZS5idWZmZXIgPSBhdWRpb0J1ZmZlcjsKCQlzb3VyY2UuY29ubmVjdChjb250ZXh0LmRlc3RpbmF0aW9uKTsKCQlzb3VyY2Uuc3RhcnQoKTsKCQl3aW5kb3cuYXVkaW9FbmdpbmUuc291cmNlcy5wdXNoKHNvdXJjZSk7CgkJc291cmNlLnJ1bm5pbmcgPSB0cnVlOwoJCXNvdXJjZS5vbmVuZGVkID0gZnVuY3Rpb24gKCkgewoJCQlpZiAoY2FsbGJhY2spIHsKCQkJCWRlbGV0ZSB3aW5kb3cuYXVkaW9FbmdpbmUuc291cmNlcy5pbmRleE9mKHNvdXJjZSk7CgkJCQl2YXIgc291cmNlcyA9IFtdOwoJCQkJZm9yICh2YXIgaSBpbiB3aW5kb3cuYXVkaW9FbmdpbmUuc291cmNlcykgewoJCQkJCWlmICh3aW5kb3cuYXVkaW9FbmdpbmUuc291cmNlc1tpXSl7CgkJCQkJCXNvdXJjZXMucHVzaCh3aW5kb3cuYXVkaW9FbmdpbmUuc291cmNlc1tpXSk7CgkJCQkJfQoJCQkJfQoJCQkJd2luZG93LmF1ZGlvRW5naW5lLnNvdXJjZXMgPSBzb3VyY2VzOwoJCQkJY2FsbGJhY2soc291cmNlKTsKCQkJfQoJCX07CgkgIH0pOwoJfSwKCXNmeDp7CgkJYXVkaW86bnVsbCwKCQlwbGF5OmZ1bmN0aW9uIChhKSB7CgkJCWZldGNoKGEpLnRoZW4oKGEpID0+IHthLmFycmF5QnVmZmVyKCkudGhlbigoZGF0YSkgPT4gewoJCQkJd2luZG93LmF1ZGlvRW5naW5lLmFwaUdldEF1ZGlvKGRhdGEpOwoJCQl9KX0pOwoJCX0KCX0sCgliZ206ewoJCWF1ZGlvOiIiLAoJCWlzUGxheWluZzpmYWxzZSwKCQlwbGF5OmZ1bmN0aW9uICgpIHsKCQkJY29uc29sZS5sb2coImxvYWRpbmcgYXVkaW8gZGF0YSIpCgkJCWZldGNoKHdpbmRvdy5hdWRpb0VuZ2luZS5iZ20uYXVkaW8pLnRoZW4oKGRhdGExKSA9PiB7ZGF0YTEuYXJyYXlCdWZmZXIoKS50aGVuKChkYXRhKSA9PiB7CgkJCQljb25zb2xlLmxvZygicGxheWluZyBhdWRpby4iKTsKCQkJCXdpbmRvdy5hdWRpb0VuZ2luZS5hcGlHZXRBdWRpbyhkYXRhLGZ1bmN0aW9uIChzb3VyY2UpIHsKCQkJCQlpZiAoc291cmNlLnJ1bm5pbmcpIHsKCQkJCQkJd2luZG93LmF1ZGlvRW5naW5lLmJnbS5wbGF5KCk7CgkJCQkJfQoJCQkJfSk7CgkJCX0pfSk7CgkJfSwKCQlwYXVzZTpmdW5jdGlvbiAoKSB7CgkJCWZvciAodmFyIGkgaW4gd2luZG93LmF1ZGlvRW5naW5lLnNvdXJjZXMpIHsKCQkJCXRyeXsKCQkJCQl3aW5kb3cuYXVkaW9FbmdpbmUuc291cmNlc1tpXS5zdG9wKCk7CgkJCQkJd2luZG93LmF1ZGlvRW5naW5lLnNvdXJjZXNbaV0ucnVubmluZyA9IGZhbHNlOwoJCQkJfWNhdGNoKGUpe2NvbnNvbGUud2FybihgW0F1ZGlvRW5naW5lXTpGYWlsZWQgdG8gc3RvcCBhdWRpbyBjb250ZXh0IHNvdXJjZTogJHtlfWApO30KCQkJfQoJCX0sCgkJc2V0U3JjOmZ1bmN0aW9uIChhKSB7CgkJCXdpbmRvdy5hdWRpb0VuZ2luZS5iZ20uYXVkaW8gPSBhOwoJCX0KCX0sCglzdG9wOmZ1bmN0aW9uICgpIHsKCQl0cnl7CgkJdGhpcy5iZ20uaXNQbGF5aW5nID0gZmFsc2U7CgkJfWNhdGNoKGUpewoJCQljb25zb2xlLndhcm4oIltBdWRpb0VuZ2luZV06ZXJyb3IgaWdub3JlZCIgKyBlKTsKCQl9OwoJfSwKCXRpY2tBdWRpbzpmdW5jdGlvbiAoKSB7CgkJaWYgKHdpbmRvdy5hdWRpb0VuZ2luZS5iZ20uaXNQbGF5aW5nID09IHRydWUpIHsKCQkJd2luZG93LmF1ZGlvRW5naW5lLmJnbS5pc1BsYXlpbmcgPSBmYWxzZTsKCQkJd2luZG93LmF1ZGlvRW5naW5lLmJnbS5wbGF5KCk7CgkJfSBlbHNlIHsKCQkJaWYgKHdpbmRvdy5hdWRpb0VuZ2luZS5iZ20uaXNQbGF5aW5nID09IGZhbHNlKSB7CgkJCQl3aW5kb3cuYXVkaW9FbmdpbmUuYmdtLmlzUGxheWluZyA9IG51bGw7CgkJCQl3aW5kb3cuYXVkaW9FbmdpbmUuYmdtLnBhdXNlKCk7CgkJCX0gZWxzZSB7CgkJCQl3aW5kb3cuYXVkaW9FbmdpbmUuYmdtLmlzUGxheWluZyA9IG51bGw7CgkJCX0KCQl9CgkJaWYgKCEoYXVkaW9FbmdpbmUuY29udGV4dC5zdGF0ZSA9PSAicnVubmluZyIpKSB7CgkJCWF1ZGlvRW5naW5lLmNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7CgkJfQoJfSwKCWFjdGl2ZTpmYWxzZQp9CndpbmRvdy5hdWRpb0VuZ2luZS5iZ20uYXVkaW8ubG9vcCA9IHRydWU7CnNldEludGVydmFsKHdpbmRvdy5hdWRpb0VuZ2luZS50aWNrQXVkaW8sMSk7Ki8="));